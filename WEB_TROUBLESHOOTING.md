# MML Web界面无法打开 - 排查指南

## 服务器端状态 ✅

**服务器正常运行**:
- 端口8888正在监听 (`0.0.0.0:8888`)
- HTTP服务器正常响应
- 本地访问正常（返回200 OK）
- 公网IP访问正常（返回200 OK）

## 可能的问题和解决方案

### 1. 浏览器缓存问题

**症状**: 页面显示空白或旧内容

**解决方法**:
- 按 `Ctrl+F5` 强制刷新
- 清除浏览器缓存
- 使用无痕模式访问
- 尝试不同的浏览器

### 2. 安全组/防火墙规则

**检查方法**:
在云服务器控制台（华为云/阿里云/腾讯云）检查安全组规则：
- 协议: TCP
- 端口: 8888
- 源地址: 0.0.0.0/0
- 动作: 允许

**解决方法**:
如果安全组规则不存在，添加入站规则允许TCP 8888端口。

### 3. 浏览器控制台错误

**检查方法**:
1. 按 `F12` 打开开发者工具
2. 查看 `Console` 标签页的错误信息
3. 查看 `Network` 标签页的请求状态

**常见错误**:
- `ERR_CONNECTION_REFUSED`: 连接被拒绝（防火墙/安全组问题）
- `ERR_TIMED_OUT`: 连接超时（网络问题）
- `Mixed Content`: HTTPS页面加载HTTP资源（如果通过HTTPS访问）
- `CORS`: 跨域问题（通常不是问题，因为服务器允许所有来源）

### 4. 网络连接问题

**测试方法**:
```bash
# 从服务器本地测试
curl http://127.0.0.1:8888/login.html

# 从外部测试（需要另一台机器）
curl http://113.44.149.111:8888/login.html

# 检查端口是否开放
telnet 113.44.149.111 8888
# 或
nc -zv 113.44.149.111 8888
```

### 5. 浏览器兼容性问题

**解决方法**:
- 尝试使用Chrome、Firefox、Edge等现代浏览器
- 检查浏览器版本是否过旧
- 禁用浏览器扩展程序后重试

## 快速诊断步骤

### 步骤1: 检查服务器状态
```bash
# 检查端口监听
netstat -tulpn | grep 8888

# 检查进程
ps aux | grep "python.*run.py"

# 检查日志
tail -f logs/ims-sip-server.log | grep MML
```

### 步骤2: 测试访问
```bash
# 本地测试
curl -v http://127.0.0.1:8888/login.html

# 公网测试
curl -v http://113.44.149.111:8888/login.html
```

### 步骤3: 检查浏览器
1. 打开浏览器开发者工具（F12）
2. 访问 `http://113.44.149.111:8888/`
3. 查看Console和Network标签页的错误信息

### 步骤4: 检查安全组
在云服务器控制台检查安全组规则，确保TCP 8888端口已开放。

## 预期行为

正常访问 `http://113.44.149.111:8888/` 应该：
1. 自动重定向到 `/login.html`
2. 显示登录页面（标题：IMS MML 管理终端 - 登录）
3. 有用户名和密码输入框
4. 默认账号提示：admin / admin

## 如果仍然无法访问

请提供以下信息：
1. 浏览器控制台的错误信息（F12 -> Console）
2. 网络请求的状态（F12 -> Network）
3. 浏览器类型和版本
4. 访问URL（是否使用了HTTPS）
5. 是否有代理或VPN

## 临时解决方案

如果急需访问，可以：
1. 使用SSH隧道：
   ```bash
   ssh -L 8888:127.0.0.1:8888 user@113.44.149.111
   ```
   然后访问 `http://localhost:8888/`

2. 检查是否有其他服务占用8888端口：
   ```bash
   lsof -i :8888
   ```
